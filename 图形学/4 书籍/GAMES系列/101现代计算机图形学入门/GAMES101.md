---
title: GAMES101
aliases: []
tags: []
create_time: 2023-05-06 15:41
uid: 202305061541
banner: "![[Pasted image 20230506154153.png]]"
---

> [!NOTE]
> 注明：前几章已经整理到到图形系统笔记中了。

# **几何**

### **几何表示方法的分类**

-   隐式

-   可以通过一个函数来表示的几何体。
-   例如圆可以表示为f（x，y，z）=0
-   优点：可以很容易判断某个点是否在几何体上
-   缺点：难以通过函数判断出几何体的真实形状

-   显式

-   通过参数映射表示的几何体（uv坐标转换为xyz坐标）

-   参数映射：通过某个带有u，v的函数分别表示出x，yz的坐标

-   直接给出几何体
-   缺点：难以表示出某个点是否在几何体上。
-   优点：容易看出来几何体的真实形状

**隐式表示**

![[97bd34d8bfaf5e4cb505c780361a4215_MD5 1.webp]]

对于复杂的几何体十分不友好。

### **隐式几何**

### **CSG(Constructive Solid Geometry)**

复杂的几何体通过简单几何体进行集合运算（交并补）得到，该操作被称之为CSG。

  

![[7523c598ed6a49e6bf8eb0ffff6ca910_MD5 1.webp]]

### **距离函数**

下图A与B相进行融合操作后得到blend（A,B)，左边三分之一完全被挡住，中间被挡住一半，最后边完全没被挡住。

距离函数：任何一个点到达**边界**的最短距离。

通过AB距离函数相加得到融合后的SDF图，可以转化为blend（A,B)这张图。

![[e0a6527bb726e0d2ec51da12844bc3bc_MD5 1.webp]]

距离函数可以将两个靠近的集合体进行融合。

![[fb5c4d2eb1ea7a2972370a4cd22892f3_MD5 1.webp]]

距离函数通过水平集（LevelSet）得到F(X)=0（边界）

### **分型**

![[b34b9f6168236975d9359f3078527fb6_MD5 1.webp]]

分型这种递归问题在渲染中会引发严重的走样

### **显式几何**

### **点云**

-   用密集的点放在空间中
-   是某个坐标系下的数据集
-   每个点包含了坐标、颜色等一系列信息
-   只要采样足够密集，理论上可以表示任意集合体
-   如果采样不够密集，将会无法分辨模型的形状
-   应用：激光扫描

### **多边形网格**

### **简介**

-   讲面拆解为多边形（大多是三角形和四边形），存储顶点和多边形信息
-   在图形学中应用的最为广泛

### **如何储存多边形信息？**

使用OBJ格式讲几何体的点、法线、纹理坐标分别表示，然后再表示，面与面的连接关系。

下图定义了一个立方体，有八个顶点（V）,六个面（Vn）多个纹理坐标（vt）表示，然后使用f表示他们之间的关系（（f V/Vt/Vn）

![[2454e4b1a82647420bc4870217ef1e6f_MD5 1.webp]]

### **贝塞尔曲线**

只要求一定要经过起止点，起止点之间的若干个控制点用于控制曲线弯曲的方向，最终形成一条经过起止点的光滑曲线被成为贝塞尔曲线。

### **德卡斯特里奥算法**

通过德卡斯特里奥算法法来绘制贝塞尔曲线。

-   引入参数t（范围 为0-1）
-   取b0到b1，b1到b2上t位置的点b0‘，b1’
-   将b0‘，b1’连接
-   取b0‘到b1’t位置上的带你b0‘’
-   将所有的0-1所有的b0‘’点都遍历一份相连即可得到贝塞尔曲线
-   若有n个控制点则将上面步骤进行递归操作直到找到最终位移b0n

![[65e54989019cf12b32392d8b4d9a41c9_MD5 1.webp]]

总结得到公式：**bn(t)=b0n(t)=Σb0Bn(t)**

可以求得一个以t为自变量的函数，由这些点形成的集合构成贝塞尔曲线

其中：

-   b为n个贝塞尔控制点
-   Bn为伯恩斯坦多项式

![[8152ebf6d30e467ab399640d4592abc2_MD5 1.webp]]

其中：

![[4f6ab7026632978755be11db133f13b6_MD5 1.webp]]

（排列组合Cni）

例子：b0、b1、b2、b3为3d空间中的点，通过函数求得n个离散的点

![[099c85c6c471a2f7b530b3dc1d881755_MD5 1.webp]]

-   对贝塞尔曲线做仿射变换只需要对控制点、起止点做仿射变换再重新绘制一遍即可。
-   对投影变换没有这样的性质

### **凸包**

贝塞尔曲线拥有凸包的性质。

连接贝塞尔曲线最外围的控制点，将其相互连接形成一个封闭空间，画出来的贝塞尔曲线一定在凸包范围内。

若贝塞尔曲线是一个直线则凸包也是一个直线。

![[3127856c904f7631ce41ef6a544b36fb_MD5 1.webp]]

### **逐段贝塞尔曲线**

当控制点太多会影响控制点的效果。

每四个控制点定义一条贝塞尔曲线，然后再将他们连接起来。

  

![[2def25503e77c453ebdc37457af1ebaa_MD5 1.webp]]

类似PhotoShop的钢笔工具

若想要逐段贝塞尔曲线平滑过渡则需要将相邻控制点共线（如3，5）否则会出现该曲线后边段的不平滑现象。

**CN连续**

将两个逐段贝塞尔曲线中的两部分连接，连接点被称之为C0连续

若相邻两个控制点距离连接点相同且共线则该连接点被称之为C1连续（再连接处一阶连续可导）

![[548486c606e62b55f38f6f5876e99437_MD5 1.webp]]

### **贝塞尔曲面**

与二维的贝塞尔曲线思想类似，但是需要定义两个参数u和v（取代之前的参数t）

先对f（u）进行遍历得到曲线，再嵌套遍历得到曲面f（u，v），类似于两层for循环进行遍历

### **网格操作**

### **网格操作的分类**

-   网格细分

-   让网格的面数更多
-   Loop细分
-   Catmull-Clark细分

-   网格简化

-   让网格面数更少
-   边坍缩

-   通过“二次误差度量”得到坍缩后最优的点

-   网格正规化

-   让网格中的三角形趋近于正三角形

![[3e838afecbde487f2cff4a1ee9dd9a2a_MD5 1.webp]]

### **Loop细分**

-   将每个三角形变为4个三角形
-   根据权重指定新的顶点位置

-   新的顶点和老的顶点以不同的规则来改变自己的位置

对于新的顶点：

V'=3/8 * (A + B) + 1/8 * (C + D)

-   V'为新的顶点变换后的位置
-   A、B分别为于两个面被共享边的的老顶点
-   C、D为非共享边的两个顶点。

对于旧的顶点：

V'=(1 - n*u) * V + original_position * neighbor_position_sum

-   V'为旧的顶点变换后的位置
-   n为顶点的度（链接的顶点数）
-   如果n=3则u=3/16 其他情况u=3/(8n)
-   neighbor_position_sum为邻居点的平均位置
-   original_position为旧顶点原本的位置

![[80f5e51f56e6e1d861de88de875ada37_MD5 1.webp]]

问题：只能对完全为三角形的几何体进行细分

### **Catmull-Clark细分**

相对于Loop细分的优势：可以用于任意不同的面的细分。

奇异点：顶点的度!=4

-   将面的中点和面上线的中点连起来

-   在第一次细分之后，非四边形面数量会加到原本奇异点的数量上

-   面上的中点（f）、边上的中点（e）、老的顶点（v）变化情况如下图

![[6be536f047576db49f4675b30487e9ce_MD5 1.webp]]

### **边坍缩算法**

通过不断迭代进行边坍缩操作达到简化模型的目的。

  

![[2bcc9a264fed859341b2c4d3971de815_MD5 1.webp]]

边坍缩面临的问题:

-   坍缩哪些面？
-   如果优先坍缩不重要的面，那如何界定不重要？
-   坍缩后的顶点位置如何描述

### **二次误差度量**

![[b6018f2a68ee3b4fe3928d5db6305e89_MD5 1.webp]]

如果将减面时候的点直接平均将会得到左边的图，显然不理想。

通过二次误差度量得到右边的点得到理想效果。

### **边坍缩算法的步骤**

-   对每一条边打一个分数，分数就是他坍缩后的二次误差度量
-   对分数最低（误差最小）的边做边坍缩

-   用到了Dijkstra最短路径算法

-   重新执行第一步知道完成整个模型的边坍缩

# **高级图形渲染概要**

### **高级光线传播**

-   无偏光线传播

-   双向路径追踪（BDPT）
-   Metropolis光线传播 (MLT)

-   有偏光线传播

-   光子映射
-   Vertex connection and merging (VCM) -结合双向追踪和光子映射

-   实时辐射度算法（IR）

有偏是随着样本的增加，结果会变化，如果样本无限多，结果会收敛到正确值。

无偏是不管样本有多少，都会得到正确的结果。

只要得出的结果会模糊就是有偏。

### **双向路径追踪（BDPT）**

思想：从光源和相机各打出一条光线，然后连接端点。

应用场景：在光源由漫反射形成的场景中效果较好。

### **Metropolis光线传播 (MLT)**

思想：使用马尔科夫链和蒙特卡罗方法，通过一定的概率扰动路径的传播，得到一条新的路径，由一条路径追踪为种子生成其他的路径。

应用场景：在复杂场景中的光线追踪

缺点：难以估计渲染完成画面的时间，局部的结果可能会比较"脏"

### **光子映射**

应用场景：特别适合渲染水中焦散的现象

一种实现方法之一：

-   从光源打出光线，在路径中发生反射折射，直到打到漫反射的物体上停止
-   再从相机打出光线，在路径中发生反射折射，直到打到漫反射的物体上停止
-   做局部的密度估计，对任意一个着色点取他周围的确定光子数并通过其占据的面积计算密度

缺点：如果当光子取值，画面会很脏，如果光子取值很大，画面会变糊。

如果光子数量无限多，那么就可以收敛成正确的画面。

### **Vertex connection and merging (VCM)**

思想：结合光子映射和双向路径追踪，如果BDPT中两边打出的光线不能连接，利用光子映射将一定范围的光线做融合，提高光线利用率。

### **实时辐射度算法（IR）**

思想：光源先进行若干次弹射到某个物体上，将这些物体当做是新的光源再进行路径追踪。

优点：渲染速度快，对漫反射场景效果较好。

缺点：无法处理glossy材质且场景缝隙会产生亮点。

### **材质建模**

### **非表面模型**

散射介质：光在传播时穿过会发生散射的介质比如雾、云等，通过相位函数决定了光如何被散射。

光通过散射介质的两种情况：

-   被吸收一部分能量，被介质削减了一部分能量
-   被反射一部分能量，能量从其他地方的能量照射进来或者介质本身会发光

头发/毛发：毛发可以理解为一个柱状模型，可以直接反射，也可以发生折射进入内部。

介绍了几种模型：

-   Kajiya-Kay Model：认为头发只有反射没有折射
-   Marschner Model：认为头发是一个半透明的玻璃圆柱体，有反射也有折射
-   Double Cylinder Model：动物与人类的头发不同，动物的头发髓质很大因此更容易发生散射，所以需要重新考虑模型，增加了散射这一参考系

颗粒材质：可以制作出比如沙子城堡的材质

### **表面模型**

次表面散射（BSSRDF）：

-   光线通过材质内部发生了散射，比如皮肤、玉石等等。
-   BSSRDF是BRDF的延伸，下图为BSSRDF的渲染方程和示意图。
-   使用Dipole Approximation，让物体内外各有一个光源来模拟光的扩散。

![[22377e50e194bcf0558745633b1995a1_MD5 1.webp]]

衣服：

衣物的渲染主要有三种方法：

-   将衣物当作表面，根据不同的织法使用不同的BRDF，相对来说效果较差但是简单快捷
-   将衣服当做散射介质，根据单根纤维的特性与他的分布来构建散射参数
-   将衣物的每一根纤维为单位进行渲染，计算量十分巨大。

### **表面细节**

-   渲染出来的场景太过于完美，反而没那么真实，真实的世界有磨损有划痕。
-   微表面模型的BRDF的法线分布不该是均匀的，满足大体趋势的同时有自己的波动，但是会造成运算量巨大。
-   这是因为在法线分布复杂的情况下，很难建立有效的的光线通路（光源→表面→摄像机）
-   通过一个像素对应了一块表面，把整块范围内的法线分布整合起来获得（P-NDF），以此简化计算
-   如果表面足够微小，需要考虑波粒二象性使用波动光学，传统的几何光学反而不太够用了。
-   使用波动光学得到的BRDF和几何光学得到的BRDF类似又有自己的特点（光的干涉和衍射）

### **程序化生成**

-   通过使用噪声函数，不需要真正生成复杂的材质，可以通过查询的方法来简化计算
-   通过查询的方法可以生成各种各样的模型
-   工业界使用Houdini专门来做程序化生成材质

# **照相机、镜头和光场**

### **成像**

-   成像 = 合成+捕捉
-   最早的相机是通过小孔成像的原理来成像的，现在的针孔相机也是使用这个原理
-   快门控制光能在相机中待多长时间
-   传感器（Sensor）记录的是光的Irradiance信息
-   针孔摄像机没有透镜，因此做不成景深

### **视场(FOV)**

-   FOV是相机的可视角度范围
-   FOV=2arctan（h/2f）其中h为传感器高度，f为焦距
-   因此视场与传感器大小、焦距均有关
-   手机摄像头通过同时减少焦距和传感器大小以求得到和相机类似的FOV

### **曝光**

-   Exposure = time * irradiance，曝光=时间*Irradiance
-   时间由快门控制，irradiance由光圈的大小和焦距控制
-   快门速度慢，曝光时间长，光在感光器上停留时间长，会产生运动模糊的现象
-   对于机械快门，如果拍摄高速物体会产生运动扭曲的现象
-   光圈的大小控制单位时间内的进光量，光圈可以制造景深，光圈越大景深越明显
-   通过F数（F/N）来描述光圈的大小，F数是焦距/光圈直径（N=f/D）
-   因此运动模糊和景深无法同时出现
-   ISO是一个后期的处理值通过乘上ISO来改变整体的明暗
-   ISO也可以在硬件上进行改变，比如改变感光器的灵敏度
-   ISO过大会产生噪声，因此一般不直接大范围调整ISO来提高亮度
-   通过很长的曝光时间应用于延时摄影上

### **镜头（透镜）**

-   真实的透镜是由很多块玻璃叠在一起制作而成的
-   薄透镜对于平行光会集中在一个点，被称之为焦点
-   目前的相机通过多块透镜的组合可以制作出不同的焦距
-   课程中我们考虑的是理想的薄透镜，同时可以任意改变焦距
-   物距、相距、焦距之间的关系：1/f=（1/zi）+（1/z0）其中f为焦距，zi为相距，z0为物距
-   在焦点前后，光线开始聚集和扩散，点的影象变成模糊的，形成一个扩大的圆，这个圆就叫做CoC
-   离焦模糊是在拍照时，被摄物体不在焦点，使得成像不是清晰的一个点，而是变成coc，coc随着光圈的增加而增大。
-   coc的宽度：C/A=d'/zi=|zs-zi|/zi
-   其中zs为透镜到coc的距离，A为镜头的直径，d'为zs-zi的绝对值

### **光线追踪与薄透镜**

![[5fcd7aa03b5497076baa9c0541fe2cff_MD5 1.webp]]

实现步骤：

-   首先确定成像平面的大小、透镜本身的焦距和光圈大小
-   然后定义透镜与拍摄平面的物距z0
-   根据前两项确定的数据算出像距zi
-   在成像平面上选一个点x''
-   在透镜上选另一个点x''
-   连接x'和透镜中心点并延长，与subject plane相交得到交点x'''，这样我们就可以知道x'''→x''这条光线最终会被记录在x'点上
-   因此我们只需要考虑x''→x''这条光线上的radiance，算出来记到x'上。

### **景深**

-   场景中的光经过透镜，打到成像平面，在成像平面附近的某个区域，这个区域内CoC都是足够小的。
-   当CoC足够小，我们就认为这个地方是清晰的，而这一区域就被我们成为景深（DOF）
-   景深外的模糊的范围会因光圈大小而变化
-   下面是DOF的计算公式

![[fedbe724e6979b0725aae36daf4eb59d_MD5 1.webp]]

### **光场**

-   我们通过全光函数P(θ，φ)用于描述我们能看到的所有东西
-   引入波长λ让其拥有色彩，P(θ，φ ，λ)
-   引入时间t让画面可以看到不同时间的场景，P(θ，φ ，λ，t)
-   引入摄像机的位置Vx、Vy、Vz，可以在任意位置观察场景，P(θ，φ ，λ，t，Vx，Vy，Vz)
-   可以将视觉定义成一个七维的函数这个函数也就是全光函数，P(θ，φ ，λ，t，Vx，Vy，Vz)
-   光场是全光函数的一部分P(θ，φ ，Vx，Vy，Vz)，是在任意位置任意方向光的物理量
-   人们法线只需要四维信息就可以定义光的物理量: 2D位置信息（u，v）+ 2D方向信息(θ，φ)
-   我们同样可以通过获取一束光在两个平行平面（s，t）和（u，v）上的位置来确定光的位置

![[9118f458bfd47aa3f8ea7c53d7c6748c_MD5 1.webp]]

-   一般相机的传感器接收到信息是三维到二维的投影，损失了深度,记录的是Irradiance
-   光场相机通过棱镜分光将的每一块单位面积记录了光场的所有信息Radiance（u,v,s,t）
-   由于记录了光线的Radiance，可以通过仅观察某个方向的光线，同时可以观察特定方向的光线实现聚焦的功能
-   光场相机由于需要多个传感器才能记录一个像素的信息因此分辨率不足，同时由于棱镜精密因此高成本

![[8007ebd4bab650e95989e8147947a7f3_MD5 1.webp]]

# **颜色与感知**

### **颜色**

-   图形学仅关心光谱中的可见光（400~700nm）
-   谱功率密度(SPD) ：描述一束光再波长上的分布

![[9257e8d344de4a1c2df58194334aa306_MD5 1.webp]]

-   颜色是一种人的感知不是光的一种属性
-   人眼的结构也类似于相机，瞳孔对应光圈、晶状体调节焦距，视网膜相当于传感器
-   人眼视网膜上分为视杆和视锥细胞分别感知光强和颜色
-   其中视锥细胞分为SML三种对不同波长的光线敏感
-   SML也分别为对应光谱波长的积分

![[e05767259e732b12eafb77e70a45155f_MD5 1.webp]]

-   同色异谱：不同的SPD的同时拥有相同的SML因此产生相同的颜色
-   RGB：通过调整RGB三原色的比例来混合出想要的有颜色
-   有些颜色怎么混合也混不出来（红色在一段波长的贡献的负的），可以通过给原色加色的方法来混合颜色

![[47f07634c701e364d9024c9e2c6f0f9a_MD5 1.webp]]

### **色彩空间**

-   sRGB：广泛使用的色彩标准，色域有限，是一种加色系统
-   CIEXYZ：一种人为定义的色彩标准，覆盖了所有可见光

-   其中Y指的是亮度
-   通过归一化得到xyz，并固定Y，这样可以制作出下面的这一张图得到所有色域

![[98d639af16385c1bbf73014492e34951_MD5 1.webp]]

![[178300b675c20964873d620af9c726c1_MD5 1.webp]]

-   HSV：通过色调（H）、饱和度（S）、明度（V）来定义颜色空间的一种颜色标准
-   CIELAB：通过三个轴，分别控制亮度和两对互补色（红-绿、蓝-黄）
-   CMYK：减色系统，由靛蓝、品红、黄色三种颜色混合出其他颜色再加上黑色组成，广泛应用于印刷

# **模拟与动画**

### **简介**

动画是一种信息传递的工具。

常用帧率：

-   电影：24FPS
-   视频：30FPS、29.994FPS
-   VR：90FPS+（不晕的基本要求）
-   游戏：30、60FPS+

### **动画里程碑**

-   3200BC-远古时期人类的壁画-Shahr-e Sukhteh, 伊朗
-   1931-Phenakistoscope圆盘，通过转动圆盘来做动画
-   1878-第一部电影Sallie Gardner
-   1937-第一部剧场版手绘电影-白雪公主与七个小矮人
-   1963-第一个计算机生成的动画
-   1972-早期计算机动画，人脸动画
-   1993-侏罗纪公园
-   1995-玩具总动员，第一部完全计算机生成的动画电影（光栅化）
-   2009-天降美食
-   2019-冰雪奇缘2

### **关键帧动画**

-   最早是由最厉害的原画画出关键帧，其他助手画出之间的差值（渐变帧）
-   现在通过插值补充两个动画中的差值

-   线性插值一般过渡不那么自然
-   使用b样条之类的平滑插值技术

### **物理模拟**

### **介绍**

-   通过建立真实的物理模型来模拟出真实的动画系统
-   例子：布料模拟、流体模拟

### **质点弹簧系统**

简单定义：一系列相互连接的质点和弹簧

-   理想弹簧：

-   胡克定律：fa-b=-k·(b-a)，k：劲度系数
-   牛顿第三定律：fb-a=-fa-b
-   问题：没有初始长度

-   非零长弹簧：

-   引入原长l||b-a||
-   ||b-a||-l 为弹簧被拉伸的长度
-   b-a/||b-a||表示a->b力的方向，是归一化
-   问题：由于没有阻力会永远震荡

![[719bd6db52fcd803d4d13b3ad9dfb5f6_MD5 1.webp]]

-   加入阻尼力：

-   再讲内容之前先普及一点：x为位移，x上一点是速度（一阶导数）点两个点是加速度（二阶导数）
-   f是阻尼力，b加上一点是速度，kd是劲度系数
-   问题：无法描述弹簧内部的力

![[4e2dc4a31f5f56332370f019d2880d90_MD5 1.webp]]

-   完善的阻尼力：

-   红框为b与a相对速度在b与a方向上的投影，是一个标量
-   红框右边是a到b的方向

![[d3a629e38efb794ebf743325a992748b_MD5 1.webp]]

问题：这样的弹簧系统无法应对对折的情况（比如讲一块布对折）

解决：通过加入斜向的弹簧来解决这样的问题。

![[7aa026b2d3d24929128de0133e5056a4_MD5 1.webp]]

问题：这样的弹簧系统无法应对沿着弹簧竖着对折的情况

解决：加入跳跃连接的点，隔一个支点加一个弹簧，这个弹簧十分的弱

![[c2d50abff989b3b994479ed51c0ce249_MD5 1.webp]]

### **有限元法FEM**

-   方便制作力的传导
-   应用于车辆碰撞的模拟

### **粒子系统**

### **粒子生成步骤**

-   生成粒子
-   计算每个粒子的力（难点）
-   更新每个粒子的位置速度
-   将死亡的粒子移除
-   渲染

### **粒子之间的作用力**

-   引力与斥力

-   重力
-   电磁力

-   阻尼力

-   摩擦
-   空气阻力
-   粘度

-   碰撞

-   墙壁
-   容器
-   物体

### **应用**

通过制定规则让粒子表现群体的个体之间的关系

-   鸟群

-   每个个体的鸟不愿意落单
-   同时不愿意离群体太近
-   方向相对统一

-   细胞结构
-   ...

### **单个粒子的模拟**

获取单个粒子的速度场，获取场内任意位置的速度参数

计算速度场内粒子的位置需要计算一阶常微分方程

![[1fe91179e44ef6d1841fcdc5bdfabbb6_MD5 1.webp]]

### **欧拉方法**

对时间做离散化的操作，利用欧拉方法（前向欧拉）获取每一个时刻的速度和位移

![[ad54990c5b2d7cdc30c7671a2de7de9f_MD5 1.webp]]

问题：误差大、稳定性不足，如果步长不足则会不准确，且对于一些曲线的模拟十分不准确，一定会正反馈，其中不稳定的问题很致命

解决：

-   中点法
-   自适应改变步长的方法
-   隐式法
-   不基于物理的方法：基于位置法、韦尔莱积分

### **中点法**

-   在初始点使用欧拉方法计算出下一位置的a点
-   在初始点与a点总取中点b
-   再使用b点的速度来求出初始点下一位置c点

![[11e465aacac53fa57676483adcee8aa7_MD5 1.webp]]

中点法完整公式：

![[d96ab49c09fd4d2553e5b76c8562cd08_MD5 1.webp]]

### **自适应步长**

计算两遍，一次是Δt，一次是Δt/2来进行欧拉方法

若两遍的结果相差较大，则应将步长减半重新计算

### **隐式欧拉方法**

![[5a6be922a8fc20d1e4af61241ae8a4bf_MD5 1.webp]]

联立方程组解出结果（假设下一个时刻的加速度已知）

### **龙格库塔法**

是一种四阶的方法，稳定性相对来说比较好。

中点集合k、k2、k3、k4通过下面的方法进行计算得到下一时刻的位置。

![[b8460b8756f7eea55f63707d30c32e05_MD5 1.webp]]

### **不基于物理的方法**

-   比如基于位置法、韦尔莱积分等方法
-   该方法不保证能量守恒
-   只通过调整某些位置，使其能够满足模型中的一些特定性质。
-   是一种不稳定的方法，但是简单且实现时间快。

### **如何判断方法是否稳定？**

-   通过研究局部截断误差O（h2）和总体累积误差O（h）来确定稳定性
-   当在局部上讲Δt变为1/2Δt时，在全局上Δt会变为1/4Δt
-   因此阶数越高越好，减少阶数，误差可以成倍的减小

### **运动学**

分为正向和反向，模拟的是真实的骨骼运动

### **正向运动学**

关节类型：

-   可以绕着关节2维的旋转
-   可以绕着关节3维的旋转
-   可以拉长一部分的关节

我们可以通过参数很容易计算出p点的坐标，通过改变参数来实现骨骼的动画就被称为正向运动学

![[d12a3a33e9a074b7dd00d440ed3920e1_MD5 1.webp]]

因为这样的操作十分不直观，艺术家们不愿意通过这样的方式来调节模型的骨骼，因此逆运动学应运而生

### **逆向运动学**

通过直观的控制尖端p点来直接控制参数，这样操作的计算量相对正运动学相比明显增大

![[2d06c57c5cf7a74eceb7819272c2dfbf_MD5 1.webp]]

问题：

-   解并不唯一：有多个可能性造成p点在所在坐标
-   无解：p点不可能在指定的坐标

解决：我们通过随机化算法（优化方法、梯度下降）等方法来解决问题，并不使用纯数学的方法来暴力解决

例子：Style-Based IK

### **骨骼绑定**

在模型上增加控制点，让人们能够方便的调整模型的动作

对于同一个模型的两个动作，通过控制点间的位置插值计算来完成，这被称为“Blend Shapes”

### **动作捕捉**

在真人身上放置控制点

优点：

-   可以快速捕捉大量数据
-   较为真实

缺点：

-   复杂、昂贵
-   动作常常会不满足要去，需要后期调整
-   捕捉条件限制

捕捉方法：

-   光学
-   磁力
-   机械

动画的制作流程：

  

![[2304d7592777bc1785d0c9405c372dbf_MD5 1.webp]]

### **刚体模拟**

刚体不会发生形变，通过求得下面的参数通过上面粒子模拟的方法计算出任意时刻的位置

  

![[dc0883cd1b56a39ea1b0ba8e35f0f7da_MD5 1.webp]]

### **流体模拟**

### **定义**

-   水体是由多个刚体小球形成的，不可压缩
-   模拟与渲染是分开的过程

### **实现思路**

-   通过获取任意时刻小球的分布位置来获取小球单位面积的密度
-   如果密度如果发生改变（不同于平静的水面），就通过通过改变小球的位置来修正位置，让水总有一个趋于平静的趋势
-   通过加入能量损失让水最终停下来

### **质点法和网格法**

质点法和网格法流体模拟中的两个不同的思路

质点法（拉格朗日法）：逐个模拟每个粒子

网格法（欧拉方法）：将一个空间定义为一个网格，通过观察以网格为单位的时间如何变换来模拟

### **混合方法MPM**

-   质点：将不同的粒子的不同属性储存在粒子上
-   网格：模拟变换的过程在网格中完成
-   将每一个时刻网格的信息写回网格内的粒子上

# **参考资料**

[GAMES101-现代计算机图形学入门-闫令琪](https://link.zhihu.com/?target=https%3A//www.bilibili.com/video/BV1X7411F744)