![[1678971121866.png]]  

**以下为次世代建模的要求**

# 模型布线的合理性  

模型阶段会分为中高模和低模阶段。
**就高模的布线而言，布线要求并没有那么严格，高模在次世代中就是为了获得一张高精度的法线贴图，是为了让低模有高精度的表现而生。**

但是对于低模，最后进入到引擎的模型，还有要用低模去绑定动画，去蒙皮等，这就需要我们对部件进行一些优化，否则后期会非常难受。  

## 动画角度  

布线要横平竖直，均匀清晰，结构线密度足够（动画线一般为三根）（动画线及关节线：脖子，肩膀，肘关节，腰，膝关节，踝关节），由于肘关节和膝关节一般是单向弯曲，所以在面数有限的情况下，也可以使用前三后二的布线  

一般关节处会布那种“前三后二”的样式的线，因为需要做运动比如手肘要弯曲了，它外部凸出来的那个位置就会多一圈线，使得它在弯曲的时候不会有那么明显的棱角感。  

考虑硬件设备的性能问题，最好要考虑到“使用有限的线去布到最有用的地方”，比如手肘弯曲的地方，还有就是它体现**剪影**的地方。  

> [!question] 剪影是什么
> 物体的轮廓线，物体本身是正形，反过来的空间就是负形
> ![[Pasted image 20230808105528.png]]

## 模型角度  

尽量把线使用在体现剪影上，单纯的在平面上加线是没有意义的，平面上的细节会在之后的制作中用法线来体现。  

## 五星点问题  
### 五星点
五星点：拥有 5 条边的点

如果是在中模阶段，减少使用多星点，因为会在细分时出现凸点的问题，**如果要使用多星点，请通过布线技巧把它移动至平面处**，不要让它出现在倒角边缘。

![[1678971121913.png]]  

在高模阶段我们的布线其实不是那么重要，但是中模到高模之中需要卡线的时候，我们经常会有这样的问题：如果我们把这个五星点放到了这个边缘处，它细分完之后会有一个凸起。  

![[1678971121962.png]]  

但是我们去把它优化到平面上不要让它出现在边缘的话，就是卡一圈线让它仅仅出现在平面上，而不是在边缘，它这个凸起就会没有了：  

![[1678971122005.png]]  

**在模型上挖洞，且要保证都是四边面的情况下吗，必然会出现五星点，五星点的出现不可避免，但可以优化。所以我们要使用一些手段将其转移到平面处，而不是边缘或者倒角的地方：**  

![[1678971122084.png]]  

### 五星点在 Maya 里的设置
关于点法线的设置有4种，其中有“面积权重”：  

![[1678971122119.png]]  

因为点法线是通过面法线计算，如果计算过程中某个面变小了，比如下图中原本是“1+2”组成一个四边形面，但是有了五星点以后，就变了“1”，面积变小，这会使得计算中间那个点的法线时，会往面积多的方向偏移。  

在小模型上还好，但是一旦到复杂模型的话，后期烘焙的时候就会出现不可逆转的问题。  

![[1678971122197.png]]  

## 预连接
还有这种在不同三维软件中，**不在一个平面上的四边形的预连接**是不同的：  
由于 Maya 和 Max 中对于三角形的预划分有时是不同的的，**所以如果四边形的四个点不在一个平面里时，请连接对角线，否则会出现以下情况**，这个同样会影响到之后的法线烘焙。

![[1678971122284.png]]  

因此如果不在导出的时候把它连好，有可能就得不到自己想要的形状了，所以在**导出前预连接**也是很有必要的。  

# UV的合理性

UV：对于三维模型上的一个贴图坐标。  

## 象限
传统的UV规范一般是“一个材质球-一个UV-一张贴图”，所以我们最好把UV放在“0-1框”。虽然软件里对贴图的识别是平铺的，只要是在“0-1框”或者在“1-1框”里面它按理来说都能识别到的。但是**在SP只能在0-1框中贴图**。  

现在UV又多了一种**udim的方式（多象限UV）**，也就是它的贴图识别不再是平铺识别了，0-1框它就识别0-1框，1-1框它就识别1-1框里面的，所以我们可以使用一个材质球分出多张UV，然后把每一个UV放在一个象限里面，**SP里面现在也开始支持udim了，需要在导入时勾选上（其实就是每个象限单独做成一个材质球来供我们绘图）。**  

## UV 利用率
贴图相当消耗资源，所以我们不能盲目地增加贴图的数量来达到好的效果，而是首先应该思考“**如何提高单张UV的利用率**”来提高它的精度。  

![[1678971122331.png]]  

小结：能打直的打直，不然会有很多UV空间上的浪费。  

## 拉伸问题

![[1678971122428.png]]  

**可以有拉伸，但必须是整体拉伸，适当的拉伸放进更多的 UV 块是允许的。**  但不能有不均匀的拉伸

## 烘焙重叠UV

![[1678971122505.png]]  

**我们要把共用的UV（比如一个裤子，左右的贴图是用的同一张，所以UV块是重叠在一起的）的其中一块，把它挪出0-1框**。若两个UV块都放在0-1框中会出现烘焙问题。  

## 硬边断开
硬边的UV一定要断开，若没有断开会出现无法处理的接缝。  

对于需要使用Tilling贴图的：  

![[1678971122844.png]]  

小结：比如四方连续贴图的部件，我们的 UV 是需要让它左右对齐的。如果不在 UV 空间里对齐，则会出现首尾不对齐而出现穿帮的效果。  

![[1678971122920.png]]  


# 模型的合理性  

## 光滑组和软硬边
- 软硬边是通过用边来定义法线  
- 光滑组是用面来定义法线

**Maya 使用软硬边：**
![[1678971122980.png]]  

打硬边会产生不可修复，因为法线有多个方向，所以会产生不和谐的接缝。  

**3Dmax 使用光滑组：**
![[1678971123030.png]]  

小结：一个平面是可以有多个光滑组的，只要相邻面是同一个光滑组，那就是软边。  

**MAYA 和 Max 的法线锁定问题：**  
比如在 Maya 做的模型，公司要求在 Max 提交。将模型导入 max 后，首先要解锁法线，然后再 max 里重更新定义光滑组。（可以用插件解决）
如果烘焙后又修改了软硬边信息，那么要重新烘焙贴图。
![[1678971123108.png]]  

**一些常见问题：**  
![[1678971123144.png]]  

![[1678971123229.png]]  

基于以上的内容，结合[盲僧老哥](https://blog.csdn.net/qq_36005498/article/details/120003326?spm=1001.2014.3001.5501)的笔记，整理如下：  

**布线的合理性**  
高模：为了获得一个高精度的法线贴图，布线要求不是很高  
低模：进行蒙皮和绑定动画等，布线的合理性尤为重要  

**布线要求：**  
动画角度：均匀，关节处多线（关节的弯曲，减少弯曲后的棱角感）  
模型角度：控制总的面数，只在体现剪影和弯曲的关节处增加布线  
五星点（出现五条线连接的点）  
中模阶段，五星点不要出现在边缘，要将其移动到平面内或者剪影内。  
由于法线计算方式的不同，点法线的方向可能因为面积权重的原因（比如某个部分因为五星点的出现导致面积变小），从而产生偏差  
不在一个平面上的四边形，一定要预先连接好再导出（Maya和Max中情况会不一样）。  

UV合理性  

UV放在0-1框里（SP后来才支持udim模式，之前是直接报错）  

udim——多象限UV（SP中每个象限会单独匹配一个材质球）  

建议：  

*   打直UV，提高利用率  
    

*   减少不均匀的拉伸  
    

*   烘焙时，共用的UV移出01框（如重叠的UV），断开硬边避免接缝  
    

*   接缝处的UV两边对齐，避免Tiling时出现错误  
    

光滑组  

光滑组（3ds Max）：通过面来定义法线  

软硬边（Maya）：软边->获得所在平面的平均法线。硬边->拥有多个方向的法线。  

建议：  

*   Maya和Max之间的相互转换要解锁法线，重新定义光滑组、软硬边  
    

*   低模的软硬边修改后需要重新烘焙法线贴图  
    

模型基本规范  

检查的一些点：  

*   该合并的点确保都合并完  
    

*   检查非法面、N边面等不规范面  
    

*   有UV，用于贴图  
    

*   不出现镂空面穿帮  
    

*   场景大小设置正确  
    

*   命名（前缀SM_）  
    

*   清除历史记录、塌陷编辑器  
    

*   坐标轴归零  
    

*   进入引擎前三角面化  
    

